(function(){"use strict";function b(n){let t=1,r=0,e=0;const o=n.length;for(let a=0;a<o;){for(e=Math.min(o-a,2654)+a;a<e;a++)t+=n[a]&255,r+=t;t=15*(t>>>16)+(t&65535),r=15*(r>>>16)+(r&65535)}return r%65521<<16|t%65521}class w{constructor(t){this.state=t}clone(){return new w(this.state)}mutateByUInt32(t){return this.state=this.state+t>>>0,this}mutateByFloat(t){const r=new ArrayBuffer(4),e=new Float32Array(r),o=new Uint32Array(r);return e[0]=t,this.mutateByUInt32(o[0])}mutateByBytes(t){return this.mutateByUInt32(b(t))}mutateByString(t){return this.mutateByBytes(new TextEncoder().encode(t))}nextInt(){let t=this.state;return t=(t^t<<13)>>>0,t=(t^t>>17)>>>0,t=(t^t<<5)>>>0,this.state=t}nextIntBetween(t,r){return t+this.nextInt()%(r-t+1)}nextFloat(){return this.nextInt()/4294967295}nextFloatBetween(t,r){return t+this.nextFloat()*(r-t)}nextBoolean(){return(this.nextInt()&1)===1}nextWord(t){let r="";for(let e=0;e<t;++e)r+="abcdefghijklmnopqrstuvwxyz".charAt(this.nextInt()%26);return r}nextChoice(t){return t[this.nextInt()%t.length]}nextShuffle(t){const r=new Array(t.length);for(let e=0;e<r.length;++e){const o=this.nextInt()%(e+1);o!==e&&(r[e]=r[o]),r[o]=t[e]}return r}}function M({scope:n,modifyReturned:t,modifyValue:r}){t(n.AudioBuffer.prototype,"getChannelData",({originalReturned:e,random:o})=>{const a=o.nextFloatBetween(-5e-4,5e-4);for(let c=0;c<e.length;++c)e[c]=(e[c]+a)*(1+o.nextFloatBetween(-5e-4,5e-4));return e}),r(n.AudioBuffer.prototype,"copyFromChannel",()=>function(e,o,a){const c=this.getChannelData(o).subarray(a);e.set(c.subarray(0,Math.min(c.length,e.length)))})}function v({scope:n,modifyGetter:t}){var r,e,o,a;t((r=n.BatteryManager)==null?void 0:r.prototype,"charging",({random:c})=>c.nextBoolean()),t((e=n.BatteryManager)==null?void 0:e.prototype,"chargingTime",()=>0),t((o=n.BatteryManager)==null?void 0:o.prototype,"dischargingTime",()=>1/0),t((a=n.BatteryManager)==null?void 0:a.prototype,"level",({random:c})=>c.nextIntBetween(90,100)/100)}function S({scope:n,modifyReturned:t,modifyGetter:r,modifyValue:e}){var B;function o({originalValue:u,random:l}){return u*(1+l.mutateByFloat(u).nextFloatBetween(-5e-4,5e-4))}const a=Object.getOwnPropertyDescriptors(n.TextMetrics.prototype);for(const[u,l]of Object.entries(a))l.get&&r(n.TextMetrics.prototype,u,o);t(n.CanvasRenderingContext2D.prototype,"getImageData",({originalReturned:u,random:l})=>{const h=u.data;l.mutateByBytes(h);for(let i=0,f=h.length-4;i<f;++i){const y=h[i];h[i+4]!==y&&(h[i]=y^l.nextInt()&1)}return u});function c(u){const l=n.document.createElement("canvas");l.width=u.width,l.height=u.height;const h=l.getContext("2d",{willReadFrequently:!0});if(!h)return u;h.globalCompositeOperation="copy",h.drawImage(u,0,0);const i=h.getImageData(0,0,l.width,l.height);return h.putImageData(i,0,0),l}e(n.HTMLCanvasElement.prototype,"toDataURL",({originalValue:u})=>function(...l){return u.call(c(this),...l)});const g=n.HTMLCanvasElement.prototype.toBlob;e(n.HTMLCanvasElement.prototype,"toBlob",({originalValue:u})=>function(...l){u.call(c(this),...l)}),e((B=n.OffscreenCanvas)==null?void 0:B.prototype,"convertToBlob",()=>function(u){const l=u==null?void 0:u.type,h=u==null?void 0:u.quality;return new Promise((i,f)=>{const y=document.createElement("canvas");y.width=this.width,y.height=this.height;const p=this.transferToImageBitmap();y.getContext("2d").drawImage(p,0,0),p.close(),g.call(c(y),m=>{m?i(m):f(new Error("OffscreenCanvas.convertToBlob failed"))},l,h)})})}function T({scope:n,modifyReturned:t,modifyGetter:r}){function e({originalValue:o,random:a}){return o*(1+a.mutateByFloat(o).nextFloatBetween(-5e-4,5e-4))}r(n.HTMLElement.prototype,"offsetWidth",e),r(n.HTMLElement.prototype,"offsetHeight",e),r(n.DOMRect.prototype,"x",e),r(n.DOMRect.prototype,"y",e),r(n.DOMRect.prototype,"width",e),r(n.DOMRect.prototype,"height",e),t(n.DOMRectReadOnly.prototype,"toJSON",({originalReturned:o,self:a})=>{for(const c in o)o[c]=a[c];return o}),r(n.SVGRect.prototype,"x",e),r(n.SVGRect.prototype,"y",e),r(n.SVGRect.prototype,"width",e),r(n.SVGRect.prototype,"height",e)}function I({scope:n,modifyGetter:t}){"deviceMemory"in n.Navigator.prototype&&t(n.Navigator.prototype,"deviceMemory",({originalValue:r,random:e})=>typeof r=="number"?2**e.nextIntBetween(0,3):r),"memory"in n.Performance.prototype&&t(n.Performance.prototype,"memory",()=>{})}function D({scope:n,modifyGetter:t}){t(n.Navigator.prototype,"doNotTrack",({random:r})=>r.nextChoice([null,"1"]))}function F({scope:n,modifyGetter:t}){for(const r of[n.HTMLIFrameElement,n.HTMLFrameElement])t(r.prototype,"contentWindow",({originalValue:e})=>(e&&x(e),e)),t(r.prototype,"contentDocument",({originalValue:e})=>(e&&e.defaultView&&x(e.defaultView),e))}function O({scope:n,modifyGetter:t}){t(n.Navigator.prototype,"hardwareConcurrency",({originalValue:r,random:e})=>r>2?e.nextIntBetween(2,r):r)}function C({scope:n,modifyGetter:t}){t(n.Navigator.prototype,"language",({originalValue:r,random:e})=>`${r}-x-${e.nextWord(5)}`),t(n.Navigator.prototype,"languages",({self:r})=>[r.language])}function E({scope:n,modifyReturned:t}){t(n.MediaDevices.prototype,"enumerateDevices",async({originalReturned:r,random:e})=>e.nextShuffle(await r))}function L({scope:n,modifyReturned:t}){t(n.HTMLMediaElement.prototype,"canPlayType",({originalArgs:r,originalReturned:e,random:o})=>{if(e&&o.mutateByString(r[0]).nextBoolean())switch(e){case"probably":return"maybe";case"maybe":return"probably"}return e})}function P({scope:n,modifyGetter:t}){function r({originalValue:e,random:o}){return Math.round(e*o.nextFloatBetween(1,1.25))}t(n.Screen.prototype,"width",r),t(n.Screen.prototype,"availLeft",r),t(n.Screen.prototype,"availWidth",({self:e})=>e.width-e.availLeft),t(n.Screen.prototype,"height",r),t(n.Screen.prototype,"availTop",r),t(n.Screen.prototype,"availHeight",({self:e})=>e.height-e.availTop),t(n.Screen.prototype,"colorDepth",({random:e})=>e.nextChoice([24,30])),t(n.Screen.prototype,"pixelDepth",({self:e})=>e.colorDepth),t(n.Screen.prototype,"isExtended",({random:e})=>e.nextBoolean()),t(n,"screenX",r),t(n,"screenLeft",({self:e})=>e.screenX),t(n,"screenY",r),t(n,"screenTop",({self:e})=>e.screenY),t(n,"devicePixelRatio",({originalValue:e,random:o})=>e*o.nextFloatBetween(1,1.01))}function R({scope:n,modifyReturned:t,modifyValue:r}){var e;if(t((e=n.StorageManager)==null?void 0:e.prototype,"estimate",async({originalReturned:o,random:a})=>{const c=await o;return c.quota=2*1024*1024*1024+Math.floor(a.nextFloat()*30*1024*1024*1024),c.usage=0,c.usageDetails={},c}),"webkitTemporaryStorage"in n.navigator){const o=Object.getPrototypeOf(n.navigator.webkitTemporaryStorage);r(o,"queryUsageAndQuota",()=>function(a,c){n.StorageManager.prototype.estimate.call(n.navigator.storage).then(g=>{a(g.usage??0,g.quota??0)},c)})}}function N({scope:n,modifyGetter:t}){t(n.Navigator.prototype,"userAgent",({originalValue:r,random:e})=>`${r} Thmbl${e.nextWord(2)}/${e.nextFloatBetween(100,999.995).toFixed(2)}`),delete n.Navigator.prototype.userAgentData}function _({scope:n,modifyReturned:t,forEachType:r}){r([n.WebGLRenderingContext,n.WebGL2RenderingContext],e=>{t(e.prototype,"getParameter",({originalReturned:o,originalArgs:a,random:c})=>{if(o){const g=a[0];switch(g){case 35661:case 34076:case 36349:case 34024:case 34930:case 3379:case 36348:case 34921:case 35660:case 36347:return Math.max(0,o-c.mutateByUInt32(g).nextIntBetween(0,4));case 37445:case 37446:return null}}return o}),t(e.prototype,"getExtension",({originalReturned:o,originalArgs:a})=>a[0]==="WEBGL_debug_renderer_info"?null:o)})}const A=[M,v,S,T,I,D,F,O,E,L,P,R,_];function H(){var t;let n=((t=window.top)==null?void 0:t.__thimbleRootState)??window.__thimbleRootState;return n||(n={seed:Math.random()*4294967295>>>0,mimicFunctions:new WeakMap},window.__thimbleRootState=n),n}function x(n){try{if(n.__thimbleModified)return;n.__thimbleModified=!0}catch{return}const{seed:t,mimicFunctions:r}=H();let e=0;function o(i,f){const{mimic:y}={mimic(...p){return f.call(this,...p)}};return Object.defineProperty(y,"name",{value:i.name}),Object.defineProperty(y,"length",{value:i.length}),r.set(y,i),y}const a=n.Function.prototype.toString,c=o(a,function(){const i=r.get(this)??this;return a.call(i)});n.Function.prototype.toString=c;const g=(i,f,y)=>{const p=e++;if(!i)return;const s=Object.getOwnPropertyDescriptor(i,f);if(!s)return;const m={originalValue:s.value,random:new w(t).mutateByUInt32(p)},d=y(m);Object.defineProperty(i,f,{enumerable:s.enumerable,configurable:s.configurable,writable:s.writable,value:typeof d=="function"?o(s.value,d):d})},h={scope:n,modifyValue:g,modifyReturned:(i,f,y)=>{g(i,f,p=>function(...s){const m=p.originalValue;return y({self:this,originalFunction:m,originalArgs:s,originalReturned:p.originalValue.call(this,...s),random:p.random.clone()})})},modifyGetter:(i,f,y)=>{const p=e++;if(!i)return;const s=Object.getOwnPropertyDescriptor(i,f);s!=null&&s.get&&Object.defineProperty(i,f,{enumerable:s.enumerable,configurable:s.configurable,set:s.set,get:o(s.get,function(){const d={originalValue:s.get.call(this),random:new w(t).mutateByUInt32(p),self:this};return y(d)})})},forEachType:(i,f)=>{const y=e;for(const p of i)e=y,f(p)}};for(const i of A)i(h)}x(window)})();
